{"ast":null,"code":"var _jsxFileName = \"/home/efren/Escritorio/tutorial/tutoriales/tutorial-09-sdk/src/components/AgregarTarea.js\";\nimport React from \"react\";\nimport { Container, Form, Col, Row, Button } from \"react-bootstrap\";\nimport firebaseApp from \"../credenciales\";\nimport { getFirestore, updateDoc, doc } from \"firebase/firestore\";\nimport { getStorage, ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst firestore = getFirestore(firebaseApp);\nconst storage = getStorage(firebaseApp);\n\nconst ArgegarTarea = ({\n  correoUsuario,\n  setArrayTareas,\n  arrayTareas\n}) => {\n  let urlDescarga;\n\n  async function añadirTarea(e) {\n    e.preventDefault();\n    const descripcion = e.target.formDescripcion.value; // crear nuevo array de tareas\n\n    const nvoArrayTareas = [...arrayTareas, {\n      id: +new Date(),\n      descripcion: descripcion,\n      url: urlDescarga\n    }]; // actualizar base de datos\n\n    const docuRef = doc(firestore, `usuarios/${correoUsuario}`);\n    updateDoc(docuRef, {\n      tareas: [...nvoArrayTareas]\n    }); //actualizar estado\n\n    setArrayTareas(nvoArrayTareas); // limpiar form\n\n    e.target.formDescripcion.value = \"\";\n  }\n\n  async function fileHandler(e) {\n    // detectar archivo\n    const archivoLocal = e.target.files[0]; // cargarlo a firebase storage\n\n    const archivoRef = ref(storage, `documentos/${archivoLocal.name}`);\n    await uploadBytes(archivoRef, archivoLocal); // obtener url de descarga\n\n    urlDescarga = await getDownloadURL(archivoRef);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: añadirTarea,\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-5\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"text\",\n            placeholder: \"Describe tu tarea\",\n            id: \"formDescripcion\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"file\",\n            placeholder: \"A\\xF1ade archivo\",\n            onChange: fileHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            children: \" AgregarTarea\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n\n_c = ArgegarTarea;\nexport default ArgegarTarea;\n\nvar _c;\n\n$RefreshReg$(_c, \"ArgegarTarea\");","map":{"version":3,"sources":["/home/efren/Escritorio/tutorial/tutoriales/tutorial-09-sdk/src/components/AgregarTarea.js"],"names":["React","Container","Form","Col","Row","Button","firebaseApp","getFirestore","updateDoc","doc","getStorage","ref","uploadBytes","getDownloadURL","firestore","storage","ArgegarTarea","correoUsuario","setArrayTareas","arrayTareas","urlDescarga","añadirTarea","e","preventDefault","descripcion","target","formDescripcion","value","nvoArrayTareas","id","Date","url","docuRef","tareas","fileHandler","archivoLocal","files","archivoRef","name"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Container, Form, Col, Row, Button } from \"react-bootstrap\";\n\nimport firebaseApp from \"../credenciales\";\nimport { getFirestore, updateDoc, doc } from \"firebase/firestore\";\nimport { getStorage, ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nconst firestore = getFirestore(firebaseApp);\nconst storage = getStorage(firebaseApp);\n\nconst ArgegarTarea = ({ correoUsuario, setArrayTareas, arrayTareas }) => {\n  let urlDescarga;\n\n  async function añadirTarea(e) {\n    e.preventDefault();\n    const descripcion = e.target.formDescripcion.value;\n    // crear nuevo array de tareas\n    const nvoArrayTareas = [\n      ...arrayTareas,\n      {\n        id: +new Date(),\n        descripcion: descripcion,\n        url: urlDescarga,\n      },\n    ];\n    // actualizar base de datos\n    const docuRef = doc(firestore, `usuarios/${correoUsuario}`);\n    updateDoc(docuRef, { tareas: [...nvoArrayTareas] });\n    //actualizar estado\n    setArrayTareas(nvoArrayTareas);\n    // limpiar form\n    e.target.formDescripcion.value = \"\";\n  }\n\n  async function fileHandler(e) {\n    // detectar archivo\n    const archivoLocal = e.target.files[0];\n    // cargarlo a firebase storage\n    const archivoRef = ref(storage, `documentos/${archivoLocal.name}`);\n    await uploadBytes(archivoRef, archivoLocal);\n    // obtener url de descarga\n    urlDescarga = await getDownloadURL(archivoRef);\n  }\n  return (\n    <Container>\n      <Form onSubmit={añadirTarea}>\n        <Row className=\"mb-5\">\n          <Col>\n            <Form.Control\n              type=\"text\"\n              placeholder=\"Describe tu tarea\"\n              id=\"formDescripcion\"\n            />\n          </Col>\n          <Col>\n            <Form.Control\n              type=\"file\"\n              placeholder=\"Añade archivo\"\n              onChange={fileHandler}\n            />\n          </Col>\n          <Col>\n            <Button type=\"submit\"> AgregarTarea</Button>\n          </Col>\n        </Row>\n      </Form>\n      <hr />\n    </Container>\n  );\n};\n\nexport default ArgegarTarea;\n"]},"metadata":{},"sourceType":"module"}